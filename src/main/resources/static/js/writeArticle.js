$(function () {
    var E = window.wangEditor
    var editor = new E('#editor') // ä¸¤ä¸ªå‚æ•°ä¹Ÿå¯ä»¥ä¼ å…¥ elem å¯¹è±¡ï¼Œclass é€‰æ‹©å™¨
// editor.customConfig.uploadImgShowBase64 = true // ä½¿ç”¨ base64 ä¿å­˜å›¾ç‰‡
// é…ç½®æœåŠ¡å™¨ç«¯åœ°å€
    editor.customConfig.uploadImgServer = '/img/uploadImg';
// éšè—â€œç½‘ç»œå›¾ç‰‡â€tab
    editor.customConfig.showLinkImg = false
// å…³é—­ç²˜è´´å†…å®¹ä¸­çš„æ ·å¼
    editor.customConfig.pasteFilterStyle = false
// å°†å›¾ç‰‡å¤§å°é™åˆ¶ä¸º 3M
    editor.customConfig.uploadImgMaxSize = 3 * 1024 * 1024;
// è‡ªå®šä¹‰ä¸Šä¼ å‚æ•°
    editor.customConfig.uploadFileName = 'file';
    editor.customConfig.uploadImgHooks = {
        // å¦‚æœæœåŠ¡å™¨ç«¯è¿”å›çš„ä¸æ˜¯ {errno:0, data: [...]} è¿™ç§æ ¼å¼ï¼Œå¯ä½¿ç”¨è¯¥é…ç½®
        // ï¼ˆä½†æ˜¯ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›çš„å¿…é¡»æ˜¯ä¸€ä¸ª JSON æ ¼å¼å­—ç¬¦ä¸²ï¼ï¼ï¼å¦åˆ™ä¼šæŠ¥é”™ï¼‰
        customInsert: function(insertImg, result, editor) {
            // å›¾ç‰‡ä¸Šä¼ å¹¶è¿”å›ç»“æœï¼Œè‡ªå®šä¹‰æ’å…¥å›¾ç‰‡çš„äº‹ä»¶ï¼ˆè€Œä¸æ˜¯ç¼–è¾‘å™¨è‡ªåŠ¨æ’å…¥å›¾ç‰‡ï¼ï¼ï¼ï¼‰
            // insertImg æ˜¯æ’å…¥å›¾ç‰‡çš„å‡½æ•°ï¼Œeditor æ˜¯ç¼–è¾‘å™¨å¯¹è±¡ï¼Œresult æ˜¯æœåŠ¡å™¨ç«¯è¿”å›çš„ç»“æœ
            // ä¸¾ä¾‹ï¼šå‡å¦‚ä¸Šä¼ å›¾ç‰‡æˆåŠŸåï¼ŒæœåŠ¡å™¨ç«¯è¿”å›çš„æ˜¯ {url:'....'} è¿™ç§æ ¼å¼ï¼Œå³å¯è¿™æ ·æ’å…¥å›¾ç‰‡ï¼š
            var url = result.url;
            insertImg(url)
            // result å¿…é¡»æ˜¯ä¸€ä¸ª JSON æ ¼å¼å­—ç¬¦ä¸²ï¼ï¼ï¼å¦åˆ™æŠ¥é”™
        }
    };

//è‡ªå®šä¹‰emoji è¡¨æƒ…ï¼ˆå¾®ä¿¡ï¼‰
    editor.customConfig.emotions = [{
        title: 'ğŸ˜',
        type: 'emoji',
        content: 'â˜€ â˜ â˜” â›„ âš¡ ğŸŒ€ ğŸŒ ğŸŒ‚ ğŸŒƒ ğŸŒ„ ğŸŒ… ğŸŒ† ğŸŒ‡ ğŸŒˆ â„ â›… ğŸŒ‰ ğŸŒŠ ğŸŒ‹ ğŸŒŒ ğŸŒ ğŸŒ‘ ğŸŒ” ğŸŒ“ ğŸŒ™ ğŸŒ• ğŸŒ› ğŸŒŸ ğŸŒ  ğŸ• ğŸ•‘ ğŸ•’ ğŸ•“ ğŸ•” ğŸ•• ğŸ•– ğŸ•— ğŸ•˜ ğŸ•™ ğŸ•š ğŸ•› âŒš âŒ› â° â³ â™ˆ â™‰ â™Š â™‹ â™Œ â™ â™ â™ â™ â™‘ â™’ â™“ â› ğŸ€ ğŸŒ· ğŸŒ± ğŸ ğŸŒ¸ ğŸŒ¹ ğŸ‚ ğŸƒ ğŸŒº ğŸŒ» ğŸŒ´ ğŸŒµ ğŸŒ¾ ğŸŒ½ ğŸ„ ğŸŒ° ğŸŒ¼ ğŸŒ¿ ğŸ’ ğŸŒ ğŸ ğŸŠ ğŸ“ ğŸ‰ ğŸ… ğŸ† ğŸˆ ğŸ ğŸ‡ ğŸ‘ ğŸ ğŸ‘€ ğŸ‘‚ ğŸ‘ƒ ğŸ‘„ ğŸ‘… ğŸ’„ ğŸ’… ğŸ’† ğŸ’‡ ğŸ’ˆ ğŸ‘¤ ğŸ‘¦ ğŸ‘§ ğŸ‘¨ ğŸ‘© ğŸ‘ª ğŸ‘« ğŸ‘® ğŸ‘¯ ğŸ‘° ğŸ‘± ğŸ‘² ğŸ‘³ ğŸ‘´ ğŸ‘µ ğŸ‘¶ ğŸ‘· ğŸ‘¸ ğŸ‘¹ ğŸ‘º ğŸ‘» ğŸ‘¼ ğŸ‘½ ğŸ‘¾ ğŸ‘¿ ğŸ’€ ğŸ’ ğŸ’‚ ğŸ’ƒ ğŸŒ ğŸ ğŸ ğŸ” ğŸ— ğŸ« ğŸ˜ ğŸ¨ ğŸ’ ğŸ‘ ğŸ™ ğŸš ğŸ› ğŸœ ğŸ ğŸ ğŸ  ğŸ¡ ğŸ¢ ğŸ¤ ğŸ¥ ğŸ¦ ğŸ£ ğŸ§ ğŸ© ğŸŸ ğŸ¬ ğŸ­ ğŸ¯ ğŸ± ğŸ³ ğŸ´ ğŸµ ğŸ¶ ğŸ· ğŸ» ğŸ¹ ğŸº ğŸ® ğŸ° ğŸ¸ ğŸ¾ ğŸ² ğŸ¼ ğŸ½ ğŸ˜  ğŸ˜© ğŸ˜² ğŸ˜ ğŸ˜µ ğŸ˜° ğŸ˜’ ğŸ˜ ğŸ˜¤ ğŸ˜œ ğŸ˜ ğŸ˜‹ ğŸ˜˜ ğŸ˜š ğŸ˜· ğŸ˜³ ğŸ˜ƒ ğŸ˜… ğŸ˜† ğŸ˜ ğŸ˜‚ ğŸ˜Š â˜º ğŸ˜„ ğŸ˜¢ ğŸ˜­ ğŸ˜¨ ğŸ˜£ ğŸ˜¡ ğŸ˜Œ ğŸ˜– ğŸ˜” ğŸ˜± ğŸ˜ª ğŸ˜ ğŸ˜“ ğŸ˜¥ ğŸ˜« ğŸ˜‰ ğŸ˜º ğŸ˜¸ ğŸ˜¹ ğŸ˜½ ğŸ˜» ğŸ˜¿ ğŸ˜¾ ğŸ˜¼ ğŸ™€ ğŸ™… ğŸ™† ğŸ™‡ ğŸ™ˆ ğŸ™Š ğŸ™‰ ğŸ™‹ ğŸ™Œ ğŸ™ ğŸ™ ğŸ™ ğŸ  ğŸ¡ ğŸ¢ ğŸ£ ğŸ¥ ğŸ¦ ğŸ§ ğŸ¨ ğŸ© ğŸª ğŸ« â›ª â›² ğŸ¬ ğŸ¯ ğŸ° ğŸ­ âš“ ğŸ® ğŸ—» ğŸ—¼ ğŸ—½ ğŸ—¾ ğŸ—¿ ğŸ‘ ğŸ‘Ÿ ğŸ‘  ğŸ‘¡ ğŸ‘¢ ğŸ‘£ ğŸ‘“ ğŸ‘• ğŸ‘– ğŸ‘‘ ğŸ‘” ğŸ‘’ ğŸ‘— ğŸ‘˜ ğŸ‘™ ğŸ‘š ğŸ‘› ğŸ‘œ ğŸ‘ ğŸ’° ğŸ’± ğŸ’¹ ğŸ’² ğŸ’³ ğŸ’´ ğŸ’µ ğŸ’¸ ğŸ”¥ ğŸ”¦ ğŸ”§ ğŸ”¨ ğŸ”© ğŸ”ª ğŸ”« ğŸ”® ğŸ”¯ ğŸ”° ğŸ”± ğŸ’‰ ğŸ’Š ğŸ…° ğŸ…± ğŸ† ğŸ…¾ ğŸ€ ğŸ ğŸ‚ ğŸ„ ğŸ… ğŸŒ ğŸ† ğŸˆ ğŸ‰ ğŸ ğŸ ğŸ“ ğŸ’ ğŸ ğŸ‡ ğŸ ğŸƒ ğŸŠ ğŸ‹ ğŸ‘ ğŸ“Ÿ â˜ ğŸ“ ğŸ“± ğŸ“² ğŸ“ ğŸ“  âœ‰ ğŸ“¨ ğŸ“© ğŸ“ª ğŸ“« ğŸ“® ğŸ“° ğŸ“¢ ğŸ“£ ğŸ“¡ ğŸ“¤ ğŸ“¥ ğŸ“¦ ğŸ“§ ğŸ”  ğŸ”¡ ğŸ”¢ ğŸ”£ ğŸ”¤ âœ’ ğŸ’º ğŸ’» âœ ğŸ“ ğŸ’¼ ğŸ’½ ğŸ’¾ ğŸ’¿ ğŸ“€ âœ‚ ğŸ“ ğŸ“ƒ ğŸ“„ ğŸ“… ğŸ“ ğŸ“‚ ğŸ““ ğŸ“– ğŸ“” ğŸ“• ğŸ“— ğŸ“˜ ğŸ“™ ğŸ“š ğŸ“› ğŸ“œ ğŸ“‹ ğŸ“† ğŸ“Š ğŸ“ˆ ğŸ“‰ ğŸ“‡ ğŸ“Œ ğŸ“’ ğŸ“ ğŸ“ ğŸ“‘ ğŸ½ âš¾ â›³ ğŸ¾ âš½ ğŸ¿ ğŸ€ ğŸ ğŸ‚ ğŸƒ ğŸ„ ğŸ† ğŸˆ ğŸŠ ğŸšƒ ğŸš‡ â“‚ ğŸš„ ğŸš… ğŸš— ğŸš™ ğŸšŒ ğŸš ğŸš¢ âœˆ â›µ ğŸš‰ ğŸš€ ğŸš¤ ğŸš• ğŸšš ğŸš’ ğŸš‘ ğŸš“ â›½ ğŸ…¿ ğŸš¥ ğŸš§ ğŸš¨ â™¨ â›º ğŸ  ğŸ¡ ğŸ¢ ğŸ£ ğŸ¤ ğŸ¥ ğŸ¦ ğŸ§ ğŸ¨ ğŸ© ğŸª ğŸ« ğŸ¬ ğŸ­ ğŸ® ğŸ€„ ğŸ¯ ğŸ° ğŸ± ğŸ² ğŸ³ ğŸ´ ğŸƒ ğŸµ ğŸ¶ ğŸ· ğŸ¸ ğŸ¹ ğŸº ğŸ» ğŸ¼ ã€½ ğŸ“· ğŸ“¹ ğŸ“º ğŸ“» ğŸ“¼ ğŸ’‹ ğŸ’Œ ğŸ’ ğŸ’ ğŸ’ ğŸ’ ğŸ’‘ ğŸ’’ ğŸ” Â© Â® â„¢ â„¹ ğŸ”Ÿ ğŸ“¶ ğŸ“³ ğŸ“´ ğŸ” ğŸ™ ğŸ° ğŸœ ğŸ ğŸ³ ğŸ¦ ğŸŸ ğŸ¡ ğŸ˜ ğŸš ğŸ ğŸ› ğŸ¢ ğŸ£ ğŸ± ğŸ² ğŸ§ ğŸ– ğŸ¥ ğŸ  ğŸ• ğŸ— ğŸ¨ ğŸ© ğŸª ğŸ« ğŸ¬ ğŸ­ ğŸ® ğŸ¯ ğŸ¤ ğŸ´ â˜• ğŸ¸ ğŸº ğŸµ ğŸ¶ ğŸ· ğŸ» ğŸ¹ â†— â†˜ â†– â†™ â¤´ â¤µ â†” â†• â¬† â¬‡ â¡ â¬… â–¶ â—€ â© âª â« â¬ ğŸ”º ğŸ”» ğŸ”¼ ğŸ”½ â­• âŒ â â— â‰ â€¼ â“ â” â• ã€° â° - â¤ ğŸ’“ ğŸ’” ğŸ’• ğŸ’– ğŸ’— ğŸ’˜ ğŸ’™ ğŸ’š ğŸ’› ğŸ’œ ğŸ’ ğŸ’ ğŸ’Ÿ â™¥ â™  â™¦ â™£ ğŸš¬ ğŸš­ â™¿ ğŸš© âš  â›” â™» ğŸš² ğŸš¶ ğŸš¹ ğŸšº ğŸ›€ ğŸš» ğŸš½ ğŸš¾ ğŸš¼ ğŸšª ğŸš« âœ” ğŸ†‘ ğŸ†’ ğŸ†“ ğŸ†” ğŸ†• ğŸ†– ğŸ†— ğŸ†˜ ğŸ†™ ğŸ†š ğŸˆ ğŸˆ‚ ğŸˆ² ğŸˆ³ ğŸˆ´ ğŸˆµ ğŸˆ¶ ğŸˆš ğŸˆ· ğŸˆ¸ ğŸˆ¹ ğŸˆ¯ ğŸˆº ãŠ™ ãŠ— ğŸ‰ ğŸ‰‘ â• â– âœ– â— ğŸ’  ğŸ’¡ ğŸ’¢ ğŸ’£ ğŸ’¤ ğŸ’¥ ğŸ’¦ ğŸ’§ ğŸ’¨ ğŸ’© ğŸ’ª ğŸ’« ğŸ’¬ âœ¨ âœ´ âœ³ âšª âš« ğŸ”´ ğŸ”µ ğŸ”² ğŸ”³ â­ â¬œ â¬› â–« â–ª â—½ â—¾ â—» â—¼ ğŸ”¶ ğŸ”· ğŸ”¸ ğŸ”¹ â‡ ğŸ’® ğŸ’¯ â†© â†ª ğŸ”ƒ ğŸ”Š ğŸ”‹ ğŸ”Œ ğŸ” ğŸ” ğŸ”’ ğŸ”“ ğŸ” ğŸ” ğŸ”‘ ğŸ”” â˜‘ ğŸ”˜ ğŸ”– ğŸ”— ğŸ”™ ğŸ”š ğŸ”› ğŸ”œ ğŸ” âœ… âœŠ âœ‹ âœŒ ğŸ‘Š ğŸ‘ â˜ ğŸ‘† ğŸ‘‡ ğŸ‘ˆ ğŸ‘‰ ğŸ‘‹ ğŸ‘ ğŸ‘Œ ğŸ‘ ğŸ‘'.split(/\s/)
    }];
//è‡ªå®šä¹‰é¢œè‰²
    editor.customConfig.colors = ['#000000', '#eeece0', '#1c487f', '#4d80bf', '#c24f4a', '#8baa4a', '#7b5ba1', '#46acc8', '#f9963b', '#ffffff', '#ff84b8', '#f44336', '#e91e63', '#9c27b0', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722', '#795548', '#9e9e9e', '#607d8b'];

// å¿…é¡»æ”¾åˆ°æœ‰å…³äºç¼–è¾‘å™¨è®¾ç½®å‰é¢
    editor.create();

    $('#txtTitle').keyup(
        function() {
            var count = $(this).val().length;Â Â Â Â Â Â Â Â Â Â Â $('.max-length-change').html(count);
        }Â Â Â );

    $("#btnPublish").click(function() {
        var articleTitle = $("#txtTitle").val();
        var articleContent = $("#editor .w-e-text").html();
        if(articleTitle == "") {
            alert_error("æ ‡é¢˜ä¸èƒ½ä¸ºç©ºï¼");
            return;
        }
        if(articleContent == "") {
            alert_error("å†…å®¹ä¸èƒ½ä¸ºç©ºï¼");
            return;
        }
        $.ajax({
            type: "POST",
            dataType: "json",
            url: '/article/publishArticle',
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify({"articleTitle" : articleTitle, "articleContent" : articleContent}),
            async:true,
            success: function(result) {
                if (result.code == 200) {
                    alert_success(result.msg);
                    location.reload();
                }
            }
        });

    });

});
